apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: kafka
spec:
  destination:
    server: https://kubernetes.default.svc
    namespace: education
  source:
    repoURL: https://charts.bitnami.com/bitnami
    chart: kafka
    targetRevision: 32.2.11
    helm:
      value: |
        replicaCount: 1

        auth:
          enabled: false

        zookeeper:
          enabled: true
          replicaCount: 1

        controller:
          replicaCount: 0 

        kraft:
          enabled: false  

        listeners:
          client:
            protocol: PLAINTEXT
          interBroker:
            protocol: PLAINTEXT

        externalAccess:
          enabled: false

  project: default
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
